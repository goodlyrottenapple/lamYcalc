%
\begin{isabellebody}%
\setisabellecontext{LamYNmless}%
%
\isamarkupsection{Locally Nameless implementation in Isabelle%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ LamYNmless\isanewline
\isakeyword{imports}\ Main\ \isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isamarkupsubsection{Definition of $\lamy$ pre-terms%
}
\isamarkuptrue%
\isacommand{typedecl}\isamarkupfalse%
\ atom\isanewline
\isanewline
\isacommand{axiomatization}\isamarkupfalse%
\ \isakeyword{where}\isanewline
\ \ atom{\isacharunderscore}inf{\isacharcolon}\ {\isachardoublequoteopen}infinite\ {\isacharparenleft}UNIV\ {\isacharcolon}{\isacharcolon}\ atom\ set{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{datatype}\isamarkupfalse%
\ type\ {\isacharequal}\ O\ {\isacharbar}\ Arr\ type\ type\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}\ {\isasymrightarrow}\ {\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\isanewline
\isacommand{datatype}\isamarkupfalse%
\ ptrm\ {\isacharequal}\ FVar\ atom\ {\isacharbar}\ BVar\ nat\ {\isacharbar}\ App\ ptrm\ ptrm\ {\isacharbar}\ Lam\ ptrm\ {\isacharbar}\ Y\ type%
\isamarkupsubsection{Definition of the open operation%
}
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ opn\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharunderscore}\ {\isasymrightarrow}\ {\isacharunderscore}{\isacharbraceright}\ {\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \ \isakeyword{where}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ {\isacharparenleft}FVar\ x{\isacharparenright}\ {\isacharequal}\ FVar\ x{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ {\isacharparenleft}BVar\ i{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}if\ i\ {\isacharequal}\ k\ then\ u\ else\ BVar\ i{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ App\ {\isacharparenleft}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ t{\isadigit{1}}{\isacharparenright}{\isacharparenleft}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ t{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ {\isacharparenleft}Lam\ t{\isacharparenright}\ {\isacharequal}\ Lam\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}k{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isasymrightarrow}\ u{\isacharbraceright}\ t{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isasymrightarrow}\ u{\isacharbraceright}\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ opn{\isacharprime}{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharcircum}{\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}opn{\isacharprime}\ t\ u\ {\isasymequiv}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ u{\isacharbraceright}\ t{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bvar{\isacharunderscore}{\isadigit{0}}{\isacharunderscore}open{\isacharunderscore}any{\isacharcolon}{\isachardoublequoteopen}BVar\ {\isadigit{0}}{\isacharcircum}M\ {\isacharequal}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ opn{\isacharprime}{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bvar{\isacharunderscore}Suc{\isacharunderscore}n{\isacharunderscore}open{\isacharunderscore}any{\isacharcolon}{\isachardoublequoteopen}{\isacharparenleft}BVar\ {\isacharparenleft}Suc\ n{\isacharparenright}{\isacharparenright}{\isacharcircum}M\ {\isacharequal}\ BVar\ {\isacharparenleft}Suc\ n{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ opn{\isacharprime}{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Definition of well formed terms%
}
\isamarkuptrue%
\isacommand{inductive}\isamarkupfalse%
\ trm\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
var{\isacharcolon}\ {\isachardoublequoteopen}trm\ {\isacharparenleft}FVar\ x{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
app{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ trm\ t{\isadigit{1}}\ {\isacharsemicolon}\ trm\ t{\isadigit{2}}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ trm\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
lam{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ trm\ {\isacharparenleft}t{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}{\isacharparenright}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ trm\ {\isacharparenleft}Lam\ t{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
Y{\isacharcolon}\ {\isachardoublequoteopen}trm\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isacommand{thm}\isamarkupfalse%
\ trm{\isachardot}simps\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bvar{\isacharunderscore}not{\isacharunderscore}trm{\isacharcolon}\ {\isachardoublequoteopen}trm\ {\isacharparenleft}BVar\ n{\isacharparenright}\ {\isasymLongrightarrow}\ False{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ trm{\isachardot}cases\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ x{\isacharunderscore}Ex{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}L{\isacharcolon}{\isacharcolon}\ atom\ set{\isachardot}\ finite\ L\ {\isasymLongrightarrow}\ {\isasymexists}x{\isachardot}\ x\ {\isasymnotin}\ L{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ ex{\isacharunderscore}new{\isacharunderscore}if{\isacharunderscore}finite\ atom{\isacharunderscore}inf{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Definition of substitution%
}
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ FV\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ atom\ set{\isachardoublequoteclose}\ \ \isakeyword{where}\isanewline
{\isachardoublequoteopen}FV\ {\isacharparenleft}FVar\ x{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}FV\ {\isacharparenleft}BVar\ i{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}FV\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}FV\ t{\isadigit{1}}{\isacharparenright}\ {\isasymunion}\ {\isacharparenleft}FV\ t{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}FV\ {\isacharparenleft}Lam\ t{\isacharparenright}\ {\isacharequal}\ FV\ t{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}FV\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}finite{\isacharcolon}\ {\isachardoublequoteopen}finite\ {\isacharparenleft}FV\ u{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}induct\ u{\isacharcomma}\ auto{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{primrec}\isamarkupfalse%
\ subst\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ atom\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}\ {\isacharbrackleft}{\isacharunderscore}\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ {\isacharunderscore}{\isacharbrackright}{\isachardoublequoteclose}\ {\isacharbrackleft}{\isadigit{9}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{9}}{\isadigit{0}}{\isacharcomma}\ {\isadigit{9}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{9}}{\isadigit{0}}{\isacharparenright}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ {\isacharparenleft}if\ x\ {\isacharequal}\ z\ then\ u\ else\ FVar\ x{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}BVar\ x{\isacharparenright}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ BVar\ x{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ App\ {\isacharparenleft}t{\isadigit{1}}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}\ {\isacharparenleft}t{\isadigit{2}}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}Lam\ t{\isacharparenright}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ Lam\ {\isacharparenleft}t{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}{\isacharbrackleft}z\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}fresh{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ t{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ t{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ t{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isachardot}simps{\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ {\isacharbrackleft}{\isacharbrackleft}simp{\isacharunderscore}trace{\isacharbrackright}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ subst{\isacharbrackleft}OF\ FV{\isachardot}simps{\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ subst{\isacharbrackleft}OF\ Set{\isachardot}insert{\isacharunderscore}iff{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ subst{\isacharbrackleft}OF\ Set{\isachardot}empty{\isacharunderscore}iff{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ subst{\isacharbrackleft}OF\ HOL{\isachardot}simp{\isacharunderscore}thms{\isacharparenleft}{\isadigit{3}}{\isadigit{1}}{\isacharparenright}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ t\ {\isacharequal}\ t{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}induct\ t{\isacharcomma}\ auto{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}trm{\isacharunderscore}core{\isacharcolon}\ {\isachardoublequoteopen}i\ {\isasymnoteq}\ j\ {\isasymLongrightarrow}\ {\isacharbraceleft}j\ {\isasymrightarrow}\ v{\isacharbraceright}\ e\ {\isacharequal}\ {\isacharbraceleft}i\ {\isasymrightarrow}\ u{\isacharbraceright}{\isacharparenleft}{\isacharbraceleft}j\ {\isasymrightarrow}\ v{\isacharbraceright}\ e{\isacharparenright}\ {\isasymLongrightarrow}\ e\ {\isacharequal}\ {\isacharbraceleft}i\ {\isasymrightarrow}\ u{\isacharbraceright}\ e{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ e\ arbitrary{\isacharcolon}\ i\ j{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}trm{\isacharcolon}\ {\isachardoublequoteopen}trm\ e\ {\isasymLongrightarrow}\ e\ {\isacharequal}\ {\isacharbraceleft}k\ {\isasymrightarrow}\ t{\isacharbraceright}e{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ arbitrary{\isacharcolon}\ k\ t\ rule{\isacharcolon}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{defer}\isamarkupfalse%
\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ L\ e\ k\ t{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ y\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymnotin}\ {\isacharparenleft}L\ {\isasymunion}\ FV\ e{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ FV{\isacharunderscore}finite\ x{\isacharunderscore}Ex\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ finite{\isacharunderscore}UnI{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ j\ {\isacharequal}\ {\isadigit{0}}\ \isakeyword{and}\ v{\isacharequal}\ {\isachardoublequoteopen}FVar\ y{\isachardoublequoteclose}\ \isakeyword{in}\ opn{\isacharunderscore}trm{\isacharunderscore}core{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isadigit{1}}{\isachardoublequoteclose}{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ {\isachardoublequoteopen}{\isadigit{2}}{\isachardoublequoteclose}\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}trm{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ e\ {\isasymLongrightarrow}\ {\isacharbraceleft}k\ {\isasymrightarrow}\ t{\isacharbraceright}e\ {\isacharequal}\ e{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ opn{\isacharunderscore}trm\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isacharbraceleft}n\ {\isasymrightarrow}\ w{\isacharbraceright}t{\isacharparenright}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ {\isacharbraceleft}n\ {\isasymrightarrow}\ w\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharbraceright}\ {\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ t\ arbitrary{\isacharcolon}n{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}opn{\isacharunderscore}trm{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ {\isacharbraceleft}n\ {\isasymrightarrow}\ w\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharbraceright}\ {\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}{\isacharbraceleft}n\ {\isasymrightarrow}\ w{\isacharbraceright}t{\isacharparenright}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}subst{\isacharunderscore}open{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fvar{\isacharunderscore}subst{\isacharunderscore}simp{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ FVar\ y\ {\isacharequal}\ FVar\ y{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fvar{\isacharunderscore}subst{\isacharunderscore}simp{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}u\ {\isacharequal}\ FVar\ x{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isacharunderscore}var{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ {\isacharparenleft}t{\isacharcircum}FVar\ y{\isacharparenright}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}\ {\isacharequal}\ {\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}{\isacharcircum}FVar\ y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ fvar{\isacharunderscore}subst{\isacharunderscore}simp{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ subst{\isacharunderscore}open{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ {\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isacharparenright}{\isacharcircum}FVar\ y\ {\isacharequal}\ {\isacharparenleft}t{\isacharcircum}FVar\ y{\isacharparenright}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ u{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isacharunderscore}var\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}intro{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ {\isacharparenleft}t{\isacharcircum}FVar\ x{\isacharparenright}{\isacharbrackleft}x{\isacharcolon}{\isacharcolon}{\isacharequal}u{\isacharbrackright}\ {\isacharequal}\ t{\isacharcircum}u{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{6}}{\isacharparenright}\ fvar{\isacharunderscore}subst{\isacharunderscore}simp{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{1}}{\isadigit{0}}{\isacharparenright}\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}u{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{defer}\isamarkupfalse%
\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ subst{\isacharunderscore}open{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}intro{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ u\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ t{\isacharcircum}u\ {\isacharequal}\ {\isacharparenleft}t{\isacharcircum}FVar\ x{\isacharparenright}{\isacharbrackleft}x{\isacharcolon}{\isacharcolon}{\isacharequal}u{\isacharbrackright}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ subst{\isacharunderscore}intro\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}trm{\isacharcolon}\ {\isachardoublequoteopen}trm\ e\ {\isasymLongrightarrow}\ trm\ u\ {\isasymLongrightarrow}\ trm{\isacharparenleft}e{\isacharbrackleft}x{\isacharcolon}{\isacharcolon}{\isacharequal}u{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ var\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}trm{\isachardot}var{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ app\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}trm{\isachardot}Y{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}lam\ L\ t{\isacharparenright}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}lam{\isacharbrackleft}\isakeyword{where}\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lam\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lam\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ trm{\isacharunderscore}opn{\isacharcolon}\ {\isachardoublequoteopen}trm\ {\isacharparenleft}Lam\ M{\isacharparenright}\ {\isasymand}\ trm\ N\ {\isasymLongrightarrow}\ trm\ M{\isacharcircum}N{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}frule\ conjE{\isacharbrackleft}\isakeyword{where}\ R{\isacharequal}{\isachardoublequoteopen}trm\ {\isacharparenleft}Lam\ M{\isacharparenright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule\ conjE{\isacharbrackleft}\isakeyword{where}\ R{\isacharequal}{\isachardoublequoteopen}trm\ N{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}trm{\isachardot}cases{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ L{\isacharparenright}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ x\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ L\ {\isasymunion}\ FV\ M{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ finite{\isacharunderscore}UnI\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ M{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}subst\ subst{\isacharunderscore}intro{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}trm{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Definition of the close operation%
}
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ cls\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ atom\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharunderscore}\ {\isacharless}{\isacharminus}\ {\isacharunderscore}{\isacharbraceright}\ {\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \ \isakeyword{where}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharparenleft}FVar\ y{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}if\ x\ {\isacharequal}\ y\ then\ BVar\ k\ else\ FVar\ y{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharparenleft}BVar\ i{\isacharparenright}\ {\isacharequal}\ BVar\ i{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ App\ {\isacharparenleft}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t{\isadigit{1}}{\isacharparenright}{\isacharparenleft}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t{\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharparenleft}Lam\ t{\isacharparenright}\ {\isacharequal}\ Lam\ {\isacharparenleft}{\isacharbraceleft}{\isacharparenleft}k{\isacharplus}{\isadigit{1}}{\isacharparenright}\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t{\isacharparenright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ {\isacharequal}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ cls{\isacharprime}{\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}atom\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharbackslash}{\isacharunderscore}{\isacharcircum}{\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}cls{\isacharprime}\ x\ t\ {\isasymequiv}\ {\isacharbraceleft}{\isadigit{0}}\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}simp{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ x\ {\isasymnotin}\ FV\ M\ {\isacharsemicolon}\ x\ {\isasymnoteq}\ y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}simp{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ M\ {\isasymunion}\ FV\ N\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ {\isacharbraceleft}k\ {\isasymrightarrow}\ N{\isacharbraceright}M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}simp{\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ {\isacharbraceleft}k\ {\isasymrightarrow}\ N{\isacharbraceright}M\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}simp{\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ M\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ y{\isacharbraceright}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ FV{\isacharunderscore}simp{\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ M\ {\isasymunion}\ FV\ N\ {\isasymLongrightarrow}\ x\ {\isasymnotin}\ FV\ {\isacharparenleft}M{\isacharbrackleft}y\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ N{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}{\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ x{\isacharbraceright}t\ {\isacharequal}\ t{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ t\ arbitrary{\isacharcolon}k{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ FV\ t\ {\isasymLongrightarrow}\ t\ {\isacharequal}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}{\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ x{\isacharbraceright}t{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}cls{\isacharunderscore}swap{\isacharcolon}\ {\isachardoublequoteopen}k\ {\isasymnoteq}\ m\ {\isasymLongrightarrow}\ x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}{\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}M\ {\isacharequal}\ {\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k\ m{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}cls{\isacharunderscore}swap{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}k\ {\isasymnoteq}\ m\ {\isasymLongrightarrow}\ x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ {\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}M\ {\isacharequal}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}{\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ opn{\isacharunderscore}cls{\isacharunderscore}swap\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}opn{\isacharunderscore}swap{\isacharcolon}\ {\isachardoublequoteopen}k\ {\isasymnoteq}\ m\ {\isasymLongrightarrow}\ x\ {\isasymnoteq}\ y\ {\isasymLongrightarrow}\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ x{\isacharbraceright}{\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}M\ {\isacharequal}\ {\isacharbraceleft}m\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}{\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ x{\isacharbraceright}M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}k\ m{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isacharcolon}\ {\isachardoublequoteopen}trm\ M\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ M{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}M{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}\ k\ rule{\isacharcolon}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ var\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ app\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}lam\ L\ t\ k{\isacharparenright}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ x{\isacharprime}\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x{\isacharprime}\ {\isasymnotin}\ L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharcomma}y{\isacharbraceright}\ {\isasymunion}\ FV\ t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ finite{\isachardot}emptyI\ finite{\isachardot}insertI\ finite{\isacharunderscore}UnI\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ lam\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}Suc\ k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}Suc\ k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}\ t\ {\isacharequal}\ {\isacharparenleft}{\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}\ t{\isacharparenright}\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{using}\isamarkupfalse%
\ {\isachardoublequoteopen}lam{\isachardoublequoteclose}{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ FV{\isacharunderscore}simp\ UnI{\isadigit{1}}\ UnI{\isadigit{2}}\ insertCI\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}\ {\isacharbraceleft}Suc\ k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}Suc\ k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t\ {\isacharequal}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}{\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ opn{\isacharunderscore}opn{\isacharunderscore}swap{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ opn{\isacharunderscore}cls{\isacharunderscore}swap{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ subst{\isacharunderscore}open{\isacharunderscore}var\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ UnI{\isadigit{2}}\ insertI{\isadigit{1}}\ subst{\isacharunderscore}open\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}{\isadigit{0}}\ {\isacharless}{\isacharminus}\ x{\isacharprime}{\isacharbraceright}{\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}{\isacharbraceleft}Suc\ k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}Suc\ k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t\ {\isacharequal}\ {\isacharbraceleft}{\isadigit{0}}\ {\isacharless}{\isacharminus}\ x{\isacharprime}{\isacharbraceright}{\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ FVar\ x{\isacharprime}{\isacharbraceright}{\isacharparenleft}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ cls{\isachardot}simps\ opn{\isachardot}simps\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharprime}\ \isakeyword{and}\ k\ {\isacharequal}\ {\isadigit{0}}\ \isakeyword{and}\ t{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}k\ {\isacharplus}\ {\isadigit{1}}\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}k\ {\isacharplus}\ {\isadigit{1}}\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ t{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ FV{\isacharunderscore}simp{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ FV{\isacharunderscore}simp{\isadigit{4}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharprime}\ \isakeyword{and}\ k\ {\isacharequal}\ {\isadigit{0}}\ \isakeyword{and}\ t{\isacharequal}{\isachardoublequoteopen}t\ {\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ FV{\isacharunderscore}simp{\isadigit{5}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ {\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}trm\ M\ {\isasymLongrightarrow}\ {\isacharparenleft}M{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}\ {\isacharequal}{\isacharparenleft}{\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ M{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{$\beta Y$-reduction%
}
\isamarkuptrue%
\isacommand{inductive}\isamarkupfalse%
\ beta{\isacharunderscore}Y\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isasymRightarrow}{\isachardoublequoteclose}\ {\isadigit{3}}{\isadigit{0}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ \ red{\isacharunderscore}L{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ trm\ N\ {\isacharsemicolon}\ M\ {\isasymRightarrow}\ M{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ M\ N\ {\isasymRightarrow}\ App\ M{\isacharprime}\ N{\isachardoublequoteclose}\isanewline
{\isacharbar}\ red{\isacharunderscore}R{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ trm\ M\ {\isacharsemicolon}\ N\ {\isasymRightarrow}\ N{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ M\ N\ {\isasymRightarrow}\ App\ M\ N{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ abs{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isasymRightarrow}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ Lam\ M\ {\isasymRightarrow}\ Lam\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ beta{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ trm\ {\isacharparenleft}Lam\ M{\isacharparenright}\ {\isacharsemicolon}\ trm\ N\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isasymRightarrow}\ M{\isacharcircum}N{\isachardoublequoteclose}\isanewline
{\isacharbar}\ Y{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}trm\ M\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M\ {\isasymRightarrow}\ App\ M\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ trm{\isacharunderscore}beta{\isacharunderscore}Y{\isacharunderscore}simp{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}M\ {\isasymRightarrow}\ M{\isacharprime}\ {\isasymLongrightarrow}\ trm\ M\ {\isasymand}\ trm\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M{\isacharprime}\ rule{\isacharcolon}beta{\isacharunderscore}Y{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}beta{\isacharunderscore}Y{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isacharunderscore}opn{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Parallel $\beta Y$-reduction%
}
\isamarkuptrue%
\isacommand{inductive}\isamarkupfalse%
\ \isanewline
\ \ pbeta\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}\ {\isasymggreater}\ {\isacharunderscore}{\isachardoublequoteclose}\ {\isacharbrackleft}{\isadigit{8}}{\isadigit{0}}{\isacharcomma}{\isadigit{8}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{8}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ \ refl{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isasymggreater}\ {\isacharparenleft}FVar\ x{\isacharparenright}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ reflY{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}Y\ {\isasymsigma}\ {\isasymggreater}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ app{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ M\ {\isasymggreater}\ M{\isacharprime}\ {\isacharsemicolon}\ N\ {\isasymggreater}\ N{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ M\ N\ {\isasymggreater}\ App\ M{\isacharprime}\ N{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ abs{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isasymggreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ Lam\ M\ {\isasymggreater}\ Lam\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ beta{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isasymggreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isacharsemicolon}\ N\ {\isasymggreater}\ N{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isasymggreater}\ M{\isacharprime}{\isacharcircum}N{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ Y{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ M\ {\isasymggreater}\ M{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M\ {\isasymggreater}\ App\ M{\isacharprime}\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}M\ {\isasymggreater}\ M{\isacharprime}\ {\isasymLongrightarrow}\ trm\ M\ {\isasymand}\ trm\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}pbeta{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}pbeta{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isacharunderscore}opn{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Maximal parallel $\beta Y$-reduction%
}
\isamarkuptrue%
\isacommand{fun}\isamarkupfalse%
\ not{\isacharunderscore}abst\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}not{\isacharunderscore}abst\ {\isacharparenleft}FVar\ x{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ {\isacharparenleft}BVar\ x{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ {\isacharparenleft}Lam\ t{\isacharparenright}\ {\isacharequal}\ False{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ {\isacharparenleft}Y\ t{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{fun}\isamarkupfalse%
\ not{\isacharunderscore}Y\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}not{\isacharunderscore}Y\ {\isacharparenleft}FVar\ x{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ {\isacharparenleft}BVar\ x{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ {\isacharparenleft}App\ t{\isadigit{1}}\ t{\isadigit{2}}{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ {\isacharparenleft}Lam\ t{\isacharparenright}\ {\isacharequal}\ True{\isachardoublequoteclose}\isanewline
{\isacharbar}\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ {\isacharparenleft}Y\ t{\isacharparenright}\ {\isacharequal}\ False{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{inductive}\isamarkupfalse%
\ \isanewline
\ \ pbeta{\isacharunderscore}max\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharunderscore}{\isachardoublequoteclose}\ {\isacharbrackleft}{\isadigit{8}}{\isadigit{0}}{\isacharcomma}{\isadigit{8}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{8}}{\isadigit{0}}{\isacharparenright}\isanewline
\isakeyword{where}\isanewline
\ \ refl{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharparenleft}FVar\ x{\isacharparenright}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ reflY{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}Y\ {\isasymsigma}\ {\isachargreater}{\isachargreater}{\isachargreater}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ app{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ not{\isacharunderscore}abst\ M\ {\isacharsemicolon}\ not{\isacharunderscore}Y\ M\ {\isacharsemicolon}\ \ M\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}\ {\isacharsemicolon}\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ N{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ M\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ App\ M{\isacharprime}\ N{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ abs{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ Lam\ M\ {\isachargreater}{\isachargreater}{\isachargreater}\ \ Lam\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ beta{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isacharsemicolon}\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ N{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isacharcircum}N{\isacharprime}{\isachardoublequoteclose}\isanewline
{\isacharbar}\ Y{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ M\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M\ {\isachargreater}{\isachargreater}{\isachargreater}\ App\ M{\isacharprime}\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ trm{\isacharunderscore}pbeta{\isacharunderscore}max{\isacharunderscore}simp{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}M\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}\ {\isasymLongrightarrow}\ trm\ M\ {\isasymand}\ trm\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}pbeta{\isacharunderscore}max{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}pbeta{\isacharunderscore}max{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isacharunderscore}opn{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lam{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isachardot}Y\ trm{\isachardot}app{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}beta{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isasymggreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isasymLongrightarrow}\ N\ {\isasymggreater}\ N{\isacharprime}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isasymggreater}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ N{\isacharprime}{\isacharbraceright}\ M{\isacharprime}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ pbeta{\isachardot}beta\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ not{\isacharunderscore}Y{\isacharunderscore}ex{\isacharcolon}\ {\isachardoublequoteopen}{\isasymnot}{\isacharparenleft}not{\isacharunderscore}Y\ M{\isacharparenright}\ {\isasymLongrightarrow}\ {\isasymexists}{\isasymsigma}{\isachardot}\ M\ {\isacharequal}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ M\ rule{\isacharcolon}not{\isacharunderscore}Y{\isachardot}cases{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ not{\isacharunderscore}abst{\isacharunderscore}simp{\isacharcolon}\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ M\ {\isasymLongrightarrow}\ not{\isacharunderscore}abst\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ M{\isacharparenright}\isanewline
\isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\ opn{\isachardot}simps\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ not{\isacharunderscore}Y{\isacharunderscore}simp{\isacharcolon}\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ M\ {\isasymLongrightarrow}\ not{\isacharunderscore}Y\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}\ {\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ M{\isacharparenright}\isanewline
\isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\ opn{\isachardot}simps\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{\cref{Lemma:maxEx}%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isacharunderscore}beta{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ M{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isasymLongrightarrow}\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ N{\isacharprime}\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ N{\isacharprime}{\isacharbraceright}\ M{\isacharprime}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isachardot}beta\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}beta{\isacharunderscore}max{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}s\ {\isachargreater}{\isachargreater}{\isachargreater}\ s{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}s{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharparenleft}s{\isacharprime}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ s\ s{\isacharprime}\ rule{\isacharcolon}pbeta{\isacharunderscore}max{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}refl\ s{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}reflY\ s{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}app\ M{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isacharunderscore}max{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ M{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ app\ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ M{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ app\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharunderscore}all\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ M\ M{\isacharprime}{\isacharparenright}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isacharunderscore}max{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}{\isachardoublequoteopen}FVar\ y{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{8}}{\isacharparenright}\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}{\isachardoublequoteopen}FVar\ y{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ L\ M\ M{\isacharprime}\ N\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isacharunderscore}max{\isacharunderscore}beta{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}max{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}max{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isacharunderscore}cls{\isacharcolon}\ {\isachardoublequoteopen}t\ {\isachargreater}{\isachargreater}{\isachargreater}\ d\ {\isasymLongrightarrow}\ y\ {\isasymnotin}\ FV\ t\ {\isasymunion}\ FV\ d\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymLongrightarrow}\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}t\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharbraceleft}k\ {\isasymrightarrow}\ FVar\ y{\isacharbraceright}{\isacharbraceleft}k\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}d{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isacharparenright}\isanewline
\isacommand{defer}\isamarkupfalse%
\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isacharparenright}\isanewline
\isacommand{defer}\isamarkupfalse%
\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharunderscore}beta{\isacharunderscore}max{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}pbeta{\isacharunderscore}max{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isacharunderscore}ex{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ M\ \isakeyword{assumes}\ {\isachardoublequoteopen}trm\ M{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}M{\isacharprime}{\isachardot}\ M\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ rule{\isacharcolon}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}not{\isacharunderscore}abst\ t{\isadigit{1}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}case{\isacharunderscore}tac\ {\isachardoublequoteopen}not{\isacharunderscore}Y\ t{\isadigit{1}}{\isachardoublequoteclose}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ P\ Q\ P{\isacharprime}\ Q{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ {\isasymsigma}\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}P\ {\isacharequal}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ not{\isacharunderscore}Y{\isacharunderscore}ex\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ Q\ {\isachargreater}{\isachargreater}{\isachargreater}\ App\ Q{\isacharprime}\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ Q{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ pbeta{\isacharunderscore}max{\isachardot}Y{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ {\isadigit{1}}{\isacharparenleft}{\isadigit{4}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{2}}\ P\ Q\ P{\isacharprime}\ Q{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{2}}{\isacharparenleft}{\isadigit{3}}{\isacharcomma}{\isadigit{4}}{\isacharcomma}{\isadigit{5}}{\isacharcomma}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ P\ P{\isacharprime}\ rule{\isacharcolon}pbeta{\isacharunderscore}max{\isachardot}induct{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{3}}\ L\ M{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ x\ \isakeyword{where}\ {\isadigit{4}}{\isacharcolon}{\isachardoublequoteopen}x\ {\isasymnotin}\ L\ {\isasymunion}\ FV\ M{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ finite{\isacharunderscore}UnI\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{3}}\ \isacommand{obtain}\isamarkupfalse%
\ M{\isacharprime}\ \isakeyword{where}\ {\isadigit{5}}{\isacharcolon}\ {\isachardoublequoteopen}M{\isacharcircum}FVar\ x\ {\isachargreater}{\isachargreater}{\isachargreater}\ M{\isacharprime}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isadigit{6}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}y{\isachardot}\ y\ {\isasymnotin}\ FV\ M{\isacharprime}\ {\isasymunion}\ FV\ M\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymLongrightarrow}\ M{\isacharcircum}FVar\ y\ {\isachargreater}{\isachargreater}{\isachargreater}\ {\isacharparenleft}{\isacharbackslash}x{\isacharcircum}M{\isacharprime}{\isacharparenright}{\isacharcircum}FVar\ y{\isachardoublequoteclose}\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\ cls{\isacharprime}{\isacharunderscore}def\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{4}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ pbeta{\isacharunderscore}max{\isacharunderscore}cls{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{5}}\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ FV{\isacharunderscore}simp{\isacharparenright}\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}FV\ M{\isacharprime}\ {\isasymunion}\ FV\ M\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isacharunderscore}max{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{6}}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ FV{\isacharunderscore}finite{\isacharparenright}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{\cref{Lemma:maxClose}%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}s\ {\isasymggreater}\ s{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}t\ {\isasymggreater}\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}s{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ t{\isacharbrackright}{\isacharparenright}\ {\isasymggreater}\ {\isacharparenleft}s{\isacharprime}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ t{\isacharprime}{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ s\ s{\isacharprime}\ rule{\isacharcolon}pbeta{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}refl\ s{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}reflY\ s{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ app\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ app\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ M\ M{\isacharprime}{\isacharparenright}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}t{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{8}}{\isacharparenright}\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}t{\isacharprime}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{3}}{\isacharparenright}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ UnI{\isadigit{1}}\ abs{\isachardot}prems\ opn{\isacharprime}{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ abs{\isachardot}prems\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ L\ M\ M{\isacharprime}\ N\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isacharunderscore}beta{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}opn{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ s{\isacharcircum}FVar\ x\ {\isasymggreater}\ s{\isacharprime}{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}finite\ L{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}t\ {\isasymggreater}\ t{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}s{\isacharcircum}t\ {\isasymggreater}\ s{\isacharprime}{\isacharcircum}t{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ x\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ L\ {\isasymunion}\ FV\ s\ {\isasymunion}\ FV\ s{\isacharprime}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ infinite{\isacharunderscore}Un\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}intro{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ {\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ subst{\isacharunderscore}intro{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}rule\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isacharunderscore}closes{\isacharunderscore}pbeta{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ a\ b\ d\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isachargreater}{\isachargreater}{\isachargreater}\ d{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}a\ {\isasymggreater}\ b{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}b\ {\isasymggreater}\ d{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ arbitrary{\isacharcolon}\ b\ rule{\isacharcolon}pbeta{\isacharunderscore}max{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}refl\ a{\isacharparenright}\ \ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{using}\isamarkupfalse%
\ refl\ pbeta{\isachardot}cases\ \isacommand{by}\isamarkupfalse%
\ fastforce\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}reflY\ a{\isacharparenright}\ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}b\ {\isacharequal}\ Y\ a{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ pbeta{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ L\ al\ ald\ ar\ ard{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{6}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}\ pbeta{\isachardot}cases{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{2}}\ L{\isacharprime}\ alb\ arb{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ beta\ \isacommand{have}\isamarkupfalse%
\ ih{\isacharcolon}\ {\isachardoublequoteopen}arb\ {\isasymggreater}\ ard{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymunion}\ L{\isacharprime}\ {\isasymLongrightarrow}\ alb{\isacharcircum}FVar\ x\ {\isasymggreater}\ ald{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ L{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}opn{\isacharparenright}\isanewline
\ \ \ \ \isacommand{defer}\isamarkupfalse%
\ \isacommand{using}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ {\isadigit{2}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ ih\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ alb\ arb{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ beta\ \isacommand{have}\isamarkupfalse%
\ ih{\isacharcolon}\ \ {\isachardoublequoteopen}arb\ {\isasymggreater}\ ard{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{1}}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}pbeta{\isachardot}cases{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\ \ \ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ L{\isacharprime}\ alb{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{with}\isamarkupfalse%
\ beta\ \isacommand{have}\isamarkupfalse%
\ ih{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymunion}\ L{\isacharprime}\ {\isasymLongrightarrow}\ alb{\isacharprime}{\isacharcircum}FVar\ x\ {\isasymggreater}\ ald{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ L{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isachardot}beta{\isacharparenright}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ beta\ ih\ ih{\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}app\ al\ ald\ ar\ ard{\isacharparenright}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ app{\isacharparenleft}{\isadigit{7}}{\isacharcomma}{\isadigit{1}}{\isacharcomma}{\isadigit{2}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}App\ al\ ar{\isachardoublequoteclose}\ b\ rule{\isacharcolon}pbeta{\isachardot}cases{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ app\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ al\ ald{\isacharparenright}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ abs{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}pbeta{\isachardot}cases{\isacharparenright}\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ L{\isacharprime}\ alb{\isacharparenright}\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ abs\ \isacommand{have}\isamarkupfalse%
\ ih{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymunion}\ L{\isacharprime}\ {\isasymLongrightarrow}\ alb{\isacharcircum}FVar\ x\ {\isasymggreater}\ ald{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ L{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ pbeta{\isachardot}abs{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ abs\ ih\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Y\ M\ M{\isacharprime}\ {\isasymsigma}{\isacharparenright}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Y{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}pbeta{\isachardot}cases{\isacharparenright}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{1}}\ M{\isacharprime}{\isacharprime}\ N{\isacharprime}{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}M{\isacharprime}{\isacharprime}\ {\isacharequal}\ Y\ {\isasymsigma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}pbeta{\isachardot}cases{\isacharcomma}\ simp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{2}}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}Y{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ Y\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\isadigit{2}}\ M{\isacharprime}{\isacharprime}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{2}}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}reflY{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Proof of $\dip(\gg)$%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymggreater}\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}a\ {\isasymggreater}\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}d{\isachardot}\ b\ {\isasymggreater}\ d\ {\isasymand}\ c\ {\isasymggreater}\ d{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ d\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isachargreater}{\isachargreater}{\isachargreater}\ d{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ pbeta{\isacharunderscore}max{\isacharunderscore}ex\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}b\ {\isasymggreater}\ d\ {\isasymand}\ c\ {\isasymggreater}\ d{\isachardoublequoteclose}\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ rule\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ pbeta{\isacharunderscore}max{\isacharunderscore}closes{\isacharunderscore}pbeta{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ assms\ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ pbeta{\isacharunderscore}max{\isacharunderscore}closes{\isacharunderscore}pbeta{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ assms\ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Reflexive-transitive closure of $\beta Y$%
}
\isamarkuptrue%
\isacommand{inductive}\isamarkupfalse%
\ close\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isacharparenright}\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}{\isacharasterisk}\ {\isacharunderscore}\ \ {\isacharunderscore}{\isachardoublequoteclose}\ {\isacharbrackleft}{\isadigit{8}}{\isadigit{0}}{\isacharcomma}{\isadigit{8}}{\isadigit{0}}{\isacharbrackright}\ {\isadigit{8}}{\isadigit{0}}{\isacharparenright}\ \isakeyword{for}\ R{\isacharcolon}{\isacharcolon}{\isachardoublequoteopen}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\isanewline
\isakeyword{where}\isanewline
\ \ base{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}R\ a\ b\ {\isasymLongrightarrow}\ R{\isacharasterisk}\ a\ b{\isachardoublequoteclose}\isanewline
{\isacharbar}\ refl{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}R{\isacharasterisk}\ a\ a{\isachardoublequoteclose}\isanewline
{\isacharbar}\ trans{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ R{\isacharasterisk}\ a\ b\ {\isacharsemicolon}\ R{\isacharasterisk}\ b\ c\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ R{\isacharasterisk}\ a\ c{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ DP\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}ptrm\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ bool{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
{\isachardoublequoteopen}DP\ R\ T\ {\isacharequal}\ {\isacharparenleft}{\isasymforall}a\ b\ c{\isachardot}\ R\ a\ b\ {\isasymand}\ T\ a\ c\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}d{\isachardot}\ T\ b\ d\ {\isasymand}\ R\ c\ d{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DP{\isacharunderscore}R{\isacharunderscore}R{\isacharunderscore}imp{\isacharunderscore}DP{\isacharunderscore}R{\isacharunderscore}Rc{\isacharunderscore}pbeta{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}DP\ pbeta\ pbeta{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}DP\ pbeta\ {\isacharparenleft}close\ pbeta{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ DP{\isacharunderscore}def\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{case}\isamarkupfalse%
\ goal{\isadigit{1}}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ goal{\isadigit{1}}{\isacharparenleft}{\isadigit{3}}{\isacharcomma}{\isadigit{2}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ arbitrary{\isacharcolon}\ b\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ goal{\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ blast{\isacharplus}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ DP{\isacharunderscore}R{\isacharunderscore}R{\isacharunderscore}imp{\isacharunderscore}DP{\isacharunderscore}Rc{\isacharunderscore}Rc{\isacharunderscore}pbeta{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}DP\ pbeta\ pbeta{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}DP\ {\isacharparenleft}close\ pbeta{\isacharparenright}\ {\isacharparenleft}close\ pbeta{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{unfolding}\isamarkupfalse%
\ DP{\isacharunderscore}def\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\isacommand{case}\isamarkupfalse%
\ goal{\isadigit{1}}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ goal{\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{3}}{\isacharparenright}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ arbitrary{\isacharcolon}\ c\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ DP{\isacharunderscore}R{\isacharunderscore}R{\isacharunderscore}imp{\isacharunderscore}DP{\isacharunderscore}R{\isacharunderscore}Rc{\isacharunderscore}pbeta\ \isacommand{using}\isamarkupfalse%
\ DP{\isacharunderscore}def\ assms\ \isacommand{apply}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ pbeta{\isacharunderscore}refl{\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}trm\ s\ {\isasymLongrightarrow}\ s\ {\isasymggreater}\ s{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ s\ rule{\isacharcolon}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ M{\isadigit{1}}{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}M\ {\isasymRightarrow}\ M{\isacharprime}\ {\isasymLongrightarrow}\ M\ {\isasymggreater}\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}beta{\isacharunderscore}Y{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ red{\isacharunderscore}L\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}beta{\isacharunderscore}Y{\isacharunderscore}simp{\isadigit{1}}\ red{\isacharunderscore}L\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isacharunderscore}refl{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ red{\isacharunderscore}L\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ red{\isacharunderscore}R\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isacharunderscore}refl{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}beta{\isacharunderscore}Y{\isacharunderscore}simp{\isadigit{1}}\ red{\isacharunderscore}R\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L{\isacharparenright}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ pbeta{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ M\ N{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ L\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymlongrightarrow}\ trm\ {\isacharparenleft}M{\isacharcircum}FVar\ x{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ trm{\isachardot}simps\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ finite{\isachardot}intros{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ trm{\isacharunderscore}opn{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ pbeta{\isachardot}beta{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isacharunderscore}refl{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ pbeta{\isacharunderscore}refl{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ M{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ M\ M{\isacharprime}\ {\isasymLongrightarrow}\ pbeta{\isacharasterisk}\ M\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ base{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ M{\isadigit{1}}{\isacharprime}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ red{\isacharunderscore}r{\isacharunderscore}close{\isacharcolon}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ N\ N{\isacharprime}\ {\isasymLongrightarrow}\ trm\ M\ {\isasymLongrightarrow}\ beta{\isacharunderscore}Y{\isacharasterisk}\ {\isacharparenleft}App\ M\ N{\isacharparenright}\ {\isacharparenleft}App\ M\ N{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ red{\isacharunderscore}l{\isacharunderscore}close{\isacharcolon}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ M\ M{\isacharprime}\ {\isasymLongrightarrow}\ trm\ N\ {\isasymLongrightarrow}\ beta{\isacharunderscore}Y{\isacharasterisk}\ {\isacharparenleft}App\ M\ N{\isacharparenright}\ {\isacharparenleft}App\ M{\isacharprime}\ N{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isacharunderscore}beta{\isacharprime}{\isacharcolon}\ {\isachardoublequoteopen}trm\ {\isacharparenleft}Lam\ M{\isacharparenright}\ {\isasymLongrightarrow}\ trm\ N\ {\isasymLongrightarrow}\ App\ {\isacharparenleft}Lam\ M{\isacharparenright}\ N\ {\isasymRightarrow}\ {\isacharbraceleft}{\isadigit{0}}\ {\isasymrightarrow}\ N{\isacharbraceright}\ M{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isachardot}beta\ opn{\isacharprime}{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharprime}{\isacharunderscore}beta{\isacharunderscore}Y{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}s\ {\isasymRightarrow}\ s{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}s{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}s{\isacharprime}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ FVar\ y{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ s\ s{\isacharprime}\ rule{\isacharcolon}beta{\isacharunderscore}Y{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}red{\isacharunderscore}L\ N\ M\ M{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isachardot}red{\isacharunderscore}L{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ red{\isacharunderscore}L\ trm{\isachardot}var\ subst{\isacharunderscore}trm\ \isacommand{by}\isamarkupfalse%
\ blast{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}red{\isacharunderscore}R\ M\ N\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isachardot}red{\isacharunderscore}R{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ red{\isacharunderscore}R\ trm{\isachardot}var\ subst{\isacharunderscore}trm\ \isacommand{by}\isamarkupfalse%
\ blast{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ M\ M{\isacharprime}{\isacharparenright}\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ beta{\isacharunderscore}Y{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}{\isachardoublequoteopen}FVar\ y{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{8}}{\isacharparenright}\ subst{\isacharunderscore}fresh{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x\ \isakeyword{and}\ u{\isacharequal}{\isachardoublequoteopen}FVar\ y{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ M\ N{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isacharunderscore}beta{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isachardot}var\ subst{\isacharunderscore}trm\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ trm{\isachardot}var\ subst{\isacharunderscore}trm\ subst{\isachardot}simps{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ rule\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ Y\ trm{\isachardot}var\ subst{\isacharunderscore}trm\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isacharunderscore}lam{\isacharunderscore}cls{\isacharcolon}\ {\isachardoublequoteopen}a\ {\isasymRightarrow}\ b\ {\isasymLongrightarrow}\ Lam\ {\isacharbraceleft}{\isadigit{0}}\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ a\ {\isasymRightarrow}\ Lam\ {\isacharbraceleft}{\isadigit{0}}\ {\isacharless}{\isacharminus}\ x{\isacharbraceright}\ b{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}{\isacharbraceleft}{\isacharbraceright}{\isachardoublequoteclose}\ \isakeyword{in}\ beta{\isacharunderscore}Y{\isachardot}abs{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\isacommand{defer}\isamarkupfalse%
\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}beta{\isacharunderscore}Y{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ cls{\isacharunderscore}opn{\isacharunderscore}eq{\isacharunderscore}subst{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}beta{\isacharunderscore}Y{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{1}}{\isacharprime}{\isacharunderscore}beta{\isacharunderscore}Y{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ simp%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ abs{\isacharunderscore}close{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ {\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ beta{\isacharunderscore}Y{\isacharasterisk}\ {\isacharparenleft}M{\isacharcircum}FVar\ x{\isacharparenright}\ {\isacharparenleft}M{\isacharprime}{\isacharcircum}FVar\ x{\isacharparenright}\ {\isacharsemicolon}\ finite\ L\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ beta{\isacharunderscore}Y{\isacharasterisk}\ {\isacharparenleft}Lam\ M{\isacharparenright}\ {\isacharparenleft}Lam\ M{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isadigit{1}}\isanewline
\ \ \isacommand{note}\isamarkupfalse%
\ {\isadigit{1}}{\isadigit{1}}\ {\isacharequal}\ {\isadigit{1}}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ x\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ L\ {\isasymunion}\ FV\ M\ {\isasymunion}\ FV\ M{\isacharprime}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ finite{\isacharunderscore}UnI\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}op\ {\isasymRightarrow}{\isacharasterisk}\ M{\isacharcircum}FVar\ x\ \ M{\isacharprime}{\isacharcircum}FVar\ x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ {\isacharparenleft}{\isadigit{4}}{\isacharparenright}fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ k{\isacharequal}{\isadigit{0}}\ \isakeyword{and}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ {\isacharparenleft}{\isadigit{2}}{\isacharparenright}fv{\isacharunderscore}opn{\isacharunderscore}cls{\isacharunderscore}id{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ k{\isacharequal}{\isadigit{0}}\ \isakeyword{and}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ opn{\isacharprime}{\isacharunderscore}def\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ base{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isacharunderscore}lam{\isacharunderscore}cls{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ M{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}pbeta{\isacharasterisk}\ M\ M{\isacharprime}\ {\isasymLongrightarrow}\ beta{\isacharunderscore}Y{\isacharasterisk}\ M\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ rule{\isacharcolon}close{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ refl\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}refl{\isacharparenright}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ trans\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ trans\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ base\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}pbeta{\isachardot}induct{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ refl\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}refl{\isacharparenright}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ reflY\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}refl{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}app\ M\ M{\isacharprime}\ N\ N{\isacharprime}{\isacharparenright}\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ b{\isacharequal}{\isachardoublequoteopen}App\ M\ N{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ red{\isacharunderscore}r{\isacharunderscore}close\ app{\isachardot}hyps{\isacharparenleft}{\isadigit{1}}{\isacharcomma}{\isadigit{4}}{\isacharparenright}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ red{\isacharunderscore}l{\isacharunderscore}close\ app{\isachardot}hyps{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{3}}{\isacharparenright}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ M\ M{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ \ abs{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ L\ M\ M{\isacharprime}\ N\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ b{\isacharequal}{\isachardoublequoteopen}App\ {\isacharparenleft}Lam\ M{\isacharprime}{\isacharparenright}\ N{\isachardoublequoteclose}\ \isakeyword{in}\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ red{\isacharunderscore}l{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ \ abs{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ b{\isacharequal}{\isachardoublequoteopen}App\ {\isacharparenleft}Lam\ M{\isacharprime}{\isacharparenright}\ N{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ red{\isacharunderscore}r{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ trm{\isachardot}lam{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}base{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isachardot}beta{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ trm{\isachardot}lam{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ beta\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Y\ M\ M{\isacharprime}\ {\isasymsigma}{\isacharparenright}\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ b{\isacharequal}{\isachardoublequoteopen}App\ M\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{in}\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ close{\isachardot}base{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ beta{\isacharunderscore}Y{\isachardot}Y{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ b{\isacharequal}{\isachardoublequoteopen}App\ M{\isacharprime}\ {\isacharparenleft}App\ {\isacharparenleft}Y\ {\isasymsigma}{\isacharparenright}\ M{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{in}\ close{\isachardot}trans{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ red{\isacharunderscore}l{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ red{\isacharunderscore}r{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ red{\isacharunderscore}r{\isacharunderscore}close{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Y\ trm{\isacharunderscore}pbeta{\isacharunderscore}simp{\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Simple-typing relation $\vdash$%
}
\isamarkuptrue%
\isacommand{type{\isacharunderscore}synonym}\isamarkupfalse%
\ ctxt\ {\isacharequal}\ {\isachardoublequoteopen}{\isacharparenleft}atom\ {\isasymtimes}\ type{\isacharparenright}\ list{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{inductive}\isamarkupfalse%
\ wf{\isacharunderscore}ctxt\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ctxt\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
nil{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharbrackleft}{\isacharbrackright}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
cons{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ x\ {\isasymnotin}\ fst{\isacharbackquote}set\ C\ {\isacharsemicolon}\ wf{\isacharunderscore}ctxt\ C\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharhash}C{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{inductive}\isamarkupfalse%
\ wt{\isacharunderscore}trm\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}ctxt\ {\isasymRightarrow}\ ptrm\ {\isasymRightarrow}\ type\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}{\isachardoublequoteopen}{\isacharunderscore}\ {\isasymturnstile}\ {\isacharunderscore}\ {\isacharcolon}\ {\isacharunderscore}{\isachardoublequoteclose}{\isacharparenright}\ \isakeyword{where}\isanewline
var{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ wf{\isacharunderscore}ctxt\ {\isasymGamma}\ {\isacharsemicolon}\ {\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isasymin}\ set\ {\isasymGamma}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}\ {\isasymturnstile}\ FVar\ x\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
app{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ {\isasymGamma}\ {\isasymturnstile}\ t{\isadigit{1}}\ {\isacharcolon}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymsigma}\ {\isacharsemicolon}\ {\isasymGamma}\ {\isasymturnstile}\ t{\isadigit{2}}\ {\isacharcolon}\ {\isasymtau}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}\ {\isasymturnstile}\ App\ t{\isadigit{1}}\ t{\isadigit{2}}\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
abs{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ finite\ L\ {\isacharsemicolon}\ {\isacharparenleft}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymturnstile}\ {\isacharparenleft}t{\isacharcircum}{\isacharparenleft}FVar\ x{\isacharparenright}{\isacharparenright}\ {\isacharcolon}\ {\isasymtau}{\isacharparenright}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymGamma}\ {\isasymturnstile}\ Lam\ t\ {\isacharcolon}\ {\isasymsigma}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\ {\isacharbar}\isanewline
Y{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ wf{\isacharunderscore}ctxt\ {\isasymGamma}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ \ {\isasymGamma}\ {\isasymturnstile}\ Y\ {\isasymsigma}\ {\isacharcolon}\ {\isacharparenleft}{\isasymsigma}\ {\isasymrightarrow}\ {\isasymsigma}{\isacharparenright}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}\ {\isasymsigma}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymLongrightarrow}\ wf{\isacharunderscore}ctxt\ {\isasymGamma}\ {\isasymand}\ x\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wf{\isacharunderscore}ctxt{\isachardot}cases{\isacharparenright}\isanewline
\isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}\ {\isasymLongrightarrow}\ wf{\isacharunderscore}ctxt\ {\isasymGamma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto\isanewline
\isacommand{using}\isamarkupfalse%
\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ x{\isacharunderscore}Ex{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}typ{\isacharunderscore}aux{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ FVar\ y\ {\isacharcolon}\ {\isasymsigma}\ {\isasymLongrightarrow}\ x\ {\isacharequal}\ y\ {\isasymLongrightarrow}\ {\isasymtau}\ {\isacharequal}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ ccontr{\isacharcomma}\ goal{\isacharunderscore}cases{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isadigit{1}}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}y\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}y{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymnotin}\ set\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}y{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymnotin}\ set\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}y{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isasymin}\ set\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ weakening{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ {\isasymGamma}\ {\isasymGamma}{\isacharprime}\ M\ {\isasymsigma}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}set\ {\isasymGamma}\ {\isasymsubseteq}\ set\ {\isasymGamma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isasymGamma}{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}{\isacharprime}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ {\isasymGamma}\ M\ {\isasymsigma}\ arbitrary{\isacharcolon}{\isasymGamma}{\isacharprime}\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ var\ \isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}var{\isacharparenright}\ \isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ var\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ app\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ app\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ {\isasymsigma}\ {\isasymGamma}\ t\ {\isasymtau}{\isacharparenright}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ {\isacharparenleft}L\ {\isasymunion}\ fst\ {\isacharbackquote}\ set\ {\isasymGamma}{\isacharprime}{\isacharparenright}\ {\isasymLongrightarrow}\ wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}\ {\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharprime}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ cons{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ fst\ {\isacharbackquote}\ set\ {\isasymGamma}{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ wt{\isacharunderscore}trm{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ abs{\isacharparenleft}{\isadigit{3}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ abs{\isachardot}prems{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ Y\ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{using}\isamarkupfalse%
\ wt{\isacharunderscore}trm{\isachardot}Y\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ wf{\isacharunderscore}ctxt{\isacharunderscore}exchange{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}\ {\isasymLongrightarrow}\ wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isadigit{1}}\ \isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}\ {\isasymand}\ x\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons{\isacharparenright}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isasymGamma}\ {\isasymand}\ y\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ fst{\isacharbackquote}set\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ {\isadigit{2}}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{4}}{\isacharcolon}\ {\isachardoublequoteopen}y\ {\isasymnotin}\ fst{\isacharbackquote}set{\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ cons{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{4}}\ \isacommand{apply}\isamarkupfalse%
\ simp\ \ \isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ cons{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{3}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ exchange{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymdelta}\ {\isasymLongrightarrow}\ {\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymdelta}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ goal{\isacharunderscore}cases\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isadigit{1}}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}set\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}\ {\isasymsubseteq}\ set\ {\isacharparenleft}{\isacharparenleft}y{\isacharcomma}{\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ weakening\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ wf{\isacharunderscore}ctxt{\isacharunderscore}exchange\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ trm{\isacharunderscore}wt{\isacharunderscore}trm{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}\ {\isasymLongrightarrow}\ trm\ M{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ {\isasymGamma}\ M\ {\isasymsigma}\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}{\isacharplus}\isanewline
\isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}subst\ trm{\isachardot}simps{\isacharcomma}\ simp{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ subst{\isacharunderscore}typ{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}trm\ M{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymtau}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ N{\isacharbrackright}\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ arbitrary{\isacharcolon}\ {\isasymGamma}\ x\ N\ {\isasymsigma}\ rule{\isacharcolon}\ trm{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}var\ y{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}cases\ {\isachardoublequoteopen}x\ {\isacharequal}\ y{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ True\ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ True{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ var\ opn{\isacharunderscore}typ{\isacharunderscore}aux\ True\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ False\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ var\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharunderscore}ctxt\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{from}\isamarkupfalse%
\ var\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}y{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isasymin}\ set\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}{\isacharparenright}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{with}\isamarkupfalse%
\ False\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}y{\isacharcomma}{\isasymsigma}{\isacharparenright}\ {\isasymin}\ set\ {\isasymGamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ False\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ wt{\isacharunderscore}trm{\isachardot}var{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}app\ M{\isacharprime}\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ app{\isacharparenleft}{\isadigit{5}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasympi}\ \isakeyword{where}\ \ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharprime}\ {\isacharcolon}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ N{\isacharprime}\ {\isacharcolon}\ {\isasympi}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharcomma}\ simp{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ app{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{4}}{\isacharcomma}{\isadigit{6}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ ih{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharprime}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ N{\isacharbrackright}\ {\isacharcolon}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N{\isacharprime}{\isacharbrackleft}x\ {\isacharcolon}{\isacharcolon}{\isacharequal}\ N{\isacharbrackright}\ {\isacharcolon}\ {\isasympi}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ ih\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}lam\ L\ M{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ lam{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasympi}\ {\isasymdelta}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharequal}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymdelta}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ Lam\ M\ {\isacharcolon}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymdelta}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharcomma}\ simp{\isacharparenright}\isanewline
\ \ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}L{\isachardot}\ finite\ L\ {\isasymand}\ {\isacharparenleft}{\isasymforall}x{\isacharprime}{\isachardot}\ x{\isacharprime}\ {\isasymnotin}\ L\ {\isasymlongrightarrow}\ {\isacharparenleft}x{\isacharprime}{\isacharcomma}\ {\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x{\isacharprime}\ {\isacharcolon}\ {\isasymdelta}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule{\isacharunderscore}tac\ subst{\isacharbrackleft}OF\ wt{\isacharunderscore}trm{\isachardot}simps{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ L{\isacharprime}\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L{\isacharprime}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymAnd}x{\isacharprime}{\isachardot}\ x{\isacharprime}\ {\isasymnotin}\ L{\isacharprime}\ {\isasymLongrightarrow}\ {\isacharparenleft}x{\isacharprime}{\isacharcomma}\ {\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x{\isacharprime}\ {\isacharcolon}\ {\isasymdelta}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{2}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}x{\isacharprime}{\isachardot}\ x{\isacharprime}\ {\isasymnotin}\ L{\isacharprime}\ {\isasymLongrightarrow}\ {\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isacharparenleft}x{\isacharprime}{\isacharcomma}\ {\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x{\isacharprime}\ {\isacharcolon}\ {\isasymdelta}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}rule\ exchange{\isacharparenright}\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isachardot}simps{\isacharparenright}\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ L{\isacharprime}\ {\isasymunion}\ {\isacharbraceleft}x{\isacharbraceright}\ {\isasymunion}\ fst\ {\isacharbackquote}\ set\ {\isasymGamma}{\isachardoublequoteclose}\ \isakeyword{in}\ wt{\isacharunderscore}trm{\isachardot}abs{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lam\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}open{\isacharunderscore}var{\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ trm{\isacharunderscore}wt{\isacharunderscore}trm\ lam\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lam{\isacharparenleft}{\isadigit{3}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ {\isadigit{3}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ weakening{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lam\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wf{\isacharunderscore}ctxt{\isachardot}cons{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lam\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Y\ {\isasymgamma}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Y{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharequal}\ {\isacharparenleft}{\isasymgamma}\ {\isasymrightarrow}\ {\isasymgamma}{\isacharparenright}\ {\isasymrightarrow}\ {\isasymgamma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharcomma}\ simp{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isacommand{unfolding}\isamarkupfalse%
\ subst{\isachardot}simps\ {\isadigit{1}}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}Y{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ Y\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ wf{\isacharunderscore}ctxt{\isacharunderscore}cons\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ opn{\isacharunderscore}typ{\isacharcolon}\isanewline
\ \ \isakeyword{fixes}\ L\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}finite\ L{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymtau}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}N\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{obtain}\isamarkupfalse%
\ x\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}x\ {\isasymnotin}\ L\ {\isasymunion}\ FV\ M{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ FV{\isacharunderscore}finite\ finite{\isacharunderscore}UnI\ x{\isacharunderscore}Ex{\isacharparenright}\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ assms\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasymtau}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ subst{\isacharunderscore}intro{\isadigit{2}}{\isacharbrackleft}\isakeyword{where}\ x{\isacharequal}x{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isacharunderscore}wt{\isacharunderscore}trm{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ subst{\isacharunderscore}typ{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ trm{\isacharunderscore}wt{\isacharunderscore}trm{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isacharunderscore}typ{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}M\ {\isasymRightarrow}\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharprime}\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{1}}{\isacharparenright}\isanewline
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}induct\ \ M\ M{\isacharprime}\ arbitrary{\isacharcolon}\ {\isasymGamma}\ {\isasymsigma}\ rule{\isacharcolon}\ beta{\isacharunderscore}Y{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}red{\isacharunderscore}L\ N\ M\ M{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ red{\isacharunderscore}L{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasymtau}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ red{\isacharunderscore}L{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharprime}\ {\isacharcolon}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}red{\isacharunderscore}R\ M\ N\ N{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ red{\isacharunderscore}R{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasymtau}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ red{\isacharunderscore}R{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N{\isacharprime}\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}abs\ L\ M\ M{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ abs{\isacharparenleft}{\isadigit{4}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasympi}\ {\isasymtau}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharequal}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ Lam\ M\ {\isacharcolon}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{using}\isamarkupfalse%
\ abs{\isachardot}prems\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}L{\isachardot}\ finite\ L\ {\isasymand}\ {\isacharparenleft}{\isasymforall}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymlongrightarrow}\ {\isacharparenleft}x{\isacharcomma}\ {\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymtau}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule{\isacharunderscore}tac\ subst{\isacharbrackleft}OF\ wt{\isacharunderscore}trm{\isachardot}simps{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ L{\isacharprime}\ \isakeyword{where}\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L{\isacharprime}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L{\isacharprime}\ {\isasymLongrightarrow}\ {\isacharparenleft}x{\isacharcomma}\ {\isasympi}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymunion}\ L{\isacharprime}\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isacharparenleft}x{\isacharcomma}{\isasympi}{\isacharparenright}{\isacharhash}{\isasymGamma}{\isacharparenright}\ {\isasymturnstile}\ M{\isacharprime}{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ abs{\isacharparenleft}{\isadigit{3}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{2}}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}{\isachardoublequoteopen}L\ {\isasymunion}\ L{\isacharprime}{\isachardoublequoteclose}\ \isakeyword{in}\ wt{\isacharunderscore}trm{\isachardot}abs{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ abs\ {\isadigit{2}}\ {\isadigit{3}}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}beta\ M\ N{\isacharparenright}\ \isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ beta{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasymtau}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ {\isacharparenleft}Lam\ M{\isacharparenright}\ {\isacharcolon}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ N\ {\isacharcolon}\ {\isasymtau}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymexists}L{\isachardot}\ finite\ L\ {\isasymand}\ {\isacharparenleft}{\isasymforall}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymlongrightarrow}\ {\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymsigma}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}drule{\isacharunderscore}tac\ subst{\isacharbrackleft}OF\ wt{\isacharunderscore}trm{\isachardot}simps{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ L\ \isakeyword{where}\ {\isadigit{3}}{\isacharcolon}\ {\isachardoublequoteopen}finite\ L{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}\ x\ {\isasymnotin}\ L\ {\isasymLongrightarrow}\ {\isacharparenleft}x{\isacharcomma}\ {\isasymtau}{\isacharparenright}\ {\isacharhash}\ {\isasymGamma}\ {\isasymturnstile}\ M{\isacharcircum}FVar\ x\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ L{\isacharequal}L\ \isakeyword{in}\ opn{\isacharunderscore}typ{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{3}}\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}Y\ M\ {\isasymtau}{\isacharparenright}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ Y{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ \isacommand{obtain}\isamarkupfalse%
\ {\isasympi}\ \isakeyword{where}\ {\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ {\isacharparenleft}Y\ {\isasymtau}{\isacharparenright}\ {\isacharcolon}\ {\isasympi}\ {\isasymrightarrow}\ {\isasymsigma}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasympi}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ {\isacharparenleft}Y\ {\isasymtau}{\isacharparenright}\ {\isacharcolon}\ {\isacharparenleft}{\isasymtau}\ {\isasymrightarrow}\ {\isasymtau}{\isacharparenright}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}Y{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ Y\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{with}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasympi}\ {\isasymrightarrow}\ {\isasymsigma}\ {\isacharequal}\ {\isacharparenleft}{\isasymtau}\ {\isasymrightarrow}\ {\isasymtau}{\isacharparenright}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ rule{\isacharcolon}wt{\isacharunderscore}trm{\isachardot}cases{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isasympi}\ {\isacharequal}\ {\isasymtau}\ {\isasymrightarrow}\ {\isasymtau}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymsigma}\ {\isacharequal}\ {\isasymtau}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{defer}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}app{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ wt{\isacharunderscore}trm{\isachardot}Y{\isacharparenright}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ wt{\isacharunderscore}terms{\isacharunderscore}impl{\isacharunderscore}wf{\isacharunderscore}ctxt\ Y\ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ {\isadigit{1}}{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ {\isadigit{2}}{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isacharunderscore}c{\isacharunderscore}typ{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{and}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ M\ M{\isacharprime}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ M{\isacharprime}\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{2}}{\isacharcomma}{\isadigit{1}}{\isacharparenright}\isanewline
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}induct\ M\ M{\isacharprime}\ arbitrary{\isacharcolon}\ {\isasymsigma}\ rule{\isacharcolon}\ close{\isachardot}induct{\isacharparenright}\isanewline
\isacommand{using}\isamarkupfalse%
\ beta{\isacharunderscore}Y{\isacharunderscore}typ\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Church Rosser Theorem%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ church{\isacharunderscore}rosser{\isacharunderscore}typ{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymGamma}\ {\isasymturnstile}\ a\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ a\ b{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}beta{\isacharunderscore}Y{\isacharasterisk}\ a\ c{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymexists}d{\isachardot}\ beta{\isacharunderscore}Y{\isacharasterisk}\ b\ d\ {\isasymand}\ beta{\isacharunderscore}Y{\isacharasterisk}\ c\ d\ {\isasymand}\ {\isasymGamma}\ {\isasymturnstile}\ d\ {\isacharcolon}\ {\isasymsigma}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{from}\isamarkupfalse%
\ assms\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}pbeta{\isacharasterisk}\ a\ b{\isachardoublequoteclose}\ {\isachardoublequoteopen}pbeta{\isacharasterisk}\ a\ c{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ M{\isadigit{1}}\ base\ \isacommand{by}\isamarkupfalse%
\ simp{\isacharplus}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ d\ \isakeyword{where}\ {\isachardoublequoteopen}pbeta{\isacharasterisk}\ b\ d{\isachardoublequoteclose}\ {\isachardoublequoteopen}pbeta{\isacharasterisk}\ c\ d{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ DP{\isacharunderscore}R{\isacharunderscore}R{\isacharunderscore}imp{\isacharunderscore}DP{\isacharunderscore}Rc{\isacharunderscore}Rc{\isacharunderscore}pbeta\ DP{\isacharunderscore}def\ Lem{\isadigit{2}}{\isacharunderscore}{\isadigit{5}}{\isacharunderscore}{\isadigit{2}}{\isacharparenright}\ \isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}thesis\ \isacommand{using}\isamarkupfalse%
\ M{\isadigit{2}}\ beta{\isacharunderscore}Y{\isacharunderscore}c{\isacharunderscore}typ\ assms\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
